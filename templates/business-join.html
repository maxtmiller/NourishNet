{% extends "layout.html" %}

{% block title %}
    Business Applications
{% endblock %}

{% block main %}
    <div class="container mt-5">
        <h2>Search for Businesses</h2>
        
        <!-- Search Bar -->
        <form method="GET" action="/business-join">
            <div class="input-group mb-4">
                <input type="text" class="form-control" name="query" placeholder="Search for businesses..." aria-label="Search">
                <button class="btn btn-primary" type="submit">Search</button>
            </div>
        </form>
        
        <h3>Businesses:</h3>
        <div id="business-list">
            <!-- Dynamically populated list of businesses -->
            {% if businesses %}
                <ul class="list-group">
                    {% for business in businesses %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <h5>{{ business.name }}</h5>
                                <p>{{ business.description }}</p>
                            </div>
                            <a href="/apply/{{ business._id }}" class="btn btn-success">Apply to Join</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No businesses found. Try searching again!</p>
            {% endif %}
        </div>
    </div>
{% endblock %}